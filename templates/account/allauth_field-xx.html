{% load i18n %}
{% load form_filters %}

{% if field.is_hidden %}
    {{ field }}
{% else %}
    <div class="mb-3{% if field.errors %} has-error{% endif %}{% if field.help_text %} has-help{% endif %}"{% if field.id_for_label %} id="{{ field.id_for_label }}-group"{% endif %}>
        {% if field.label and field.field.widget.input_type != 'checkbox' %}
            <label for="{{ field.id_for_label }}" 
                   class="form-label{% if field.field.required %} required{% endif %}">
                   {{ field.label }}{% if field.field.required %} 
                   <span class="text-danger">*</span>{% endif %}
                </label>
        {% endif %}
        
        {% if field.field.widget.input_type == 'checkbox' %}
            <div class="form-check">
                {{ field }}
                {% if field.label %}
                    <label for="{{ field.id_for_label }}" 
                           class="form-check-label">{{ field.label }}
                    </label>
                {% endif %}
            </div>
        {% elif field.field.widget.input_type == 'radio' %}
            <div class="form-check">
                {% for choice in field %}
                    <div class="form-check">
                        <input type="radio" class="form-check-input" 
                               name="{{ field.name }}" value="{{ choice.data.value }}"{% if choice.data.id %} 
                               id="{{ choice.data.id }}"{% endif %}{% if choice.data.selected %} checked{% endif %}>
                        <label class="form-check-label"{% if choice.data.id %} 
                               for="{{ choice.data.id }}"{% endif %}>{{ choice.data.label }}
                        </label>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            {{ field|add_class:"form-control" }}
        {% endif %}
        
        {% if field.errors %}
            <div class="invalid-feedback d-block">
                {% for error in field.errors %}
                    {{ error }}<br>
                {% endfor %}
            </div>
        {% endif %}
        
        {% if field.help_text %}
            <div class="form-text">{{ field.help_text|safe }}</div>
        {% endif %}
    </div>
{% endif %}